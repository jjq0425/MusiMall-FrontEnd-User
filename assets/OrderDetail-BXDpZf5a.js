import{_ as w,c as p,a as T,d as o,t as s,x as N,o as h,D as B,u as M,h as g,m as H,f as e,e as L,b as V,w as t,r as c,M as m,k as Y,i as n,A as j,C as F}from"./index-B-BqWMFG.js";import{a as R}from"./trade-AurPgh3C.js";import{a as $}from"./address-6bnxlf3X.js";import{O as q}from"./OrderStatusTag-CfnpNjFb.js";import{T as z}from"./TradeList-8Y4X8t5j.js";const P={class:"header-content"},E={style:{"margin-top":"10px"}},U={__name:"OrderHeader",props:{orderStatus:{type:Number,required:!0}},setup(b){const _=b,f=p(()=>{switch(_.orderStatus){case 1:return"订单待支付，快去付款吧！";case 2:return"已支付，宝贝正在路上~";case 4:return"订单已完成，感谢您的购买！";case 5:return"订单已取消，期待下次光临~";case 6:return"订单已退款，钱钱已退回~";default:return"订单状态未知"}}),v=p(()=>{switch(_.orderStatus){case 1:return"支付勿延俄顷间，订单将失君莫叹。尽快完成支付办，以免向隅空悲叹。";case 2:return"宝贝打包正忙时，请君耐心稍等候。不久便将寄君手，欢欣期待莫心焦。";case 4:return"喜得宝物愿君欢，使用愉快常相伴。欢迎再次来光顾，宾至如归情不散。";case 5:return"订单取消已成空，缘分散尽暂分别。期待下次再相遇，再见之时情更浓。";case 6:return"退款已回君账户，查收无误心自宽。钱钱归位喜盈怀，服务周到愿君还。";default:return"订单状态未可知，疑问重重心惑之。联系客服解君忧，答疑解惑不迟疑。"}}),r=p(()=>{switch(_.orderStatus){case 1:return"status-pending";case 2:return"status-paid";case 4:return"status-completed";case 5:return"status-cancelled";case 6:return"status-refunded";default:return"status-unknown"}});return(l,S)=>(h(),T("div",{class:N(["order-header",r.value])},[o("div",P,[o("h1",null,s(f.value),1),o("p",E,s(v.value),1)])],2))}},W=w(U,[["__scopeId","data-v-ed165f78"]]),G={class:"order-detail-page"},J={class:"order-info card"},K={class:"address-info card"},Q={class:"trade-items card"},X={class:"payment-info card"},Z={class:"remark-info card"},ee={__name:"OrderDetail",setup(b){const f=B().params.id,v=M(),r=g({code:"",orderTime:"",orderStatus:0,payStatus:0,totalAmount:0,paymentAmount:0,remark:"",tradeItemList:[{productName:"",model:"",price:0,quantity:0,picture:""}]}),l=g({receiverName:"",receiverPhone:"",province:"",city:"",district:"",detailAddress:"",postCode:""}),S=async()=>{window.scrollTo(0,0),m.loading({content:"加载中...",id:"order-detail"});try{const u=await R(f);if(!u.data||u.data.length!=1){m.error({content:"订单不存在",id:"order-detail"}),Y.push({name:"Order"});return}m.success({content:"获取订单详情成功",id:"order-detail"}),Object.assign(r,u.data[0]);const a=await $(r.deliveryAddressId);Object.assign(l,a)}catch{m.error({content:"获取订单详情失败",id:"order-detail"})}finally{}},O=u=>F(u).format("YYYY-MM-DD HH:mm:ss");p(()=>{switch(r.orderStatus){case 1:return"待支付";case 2:return"已支付";case 4:return"已完成";case 5:return"交易取消";case 6:return"退款退货";default:return"未知状态"}});const D=p(()=>{switch(r.payStatus){case 1:return"未支付";case 2:return"已支付";case 3:return"已退款";case 4:return"失败";default:return"未知状态"}}),I=()=>r.orderTime+15*60*1e3,k=()=>{m.info({content:"超时未支付，订单即将取消...",duration:4e3}),setTimeout(()=>{S()},3500)};return H(()=>{S()}),(u,a)=>{const A=c("a-countdown"),x=c("a-alert"),i=c("a-divider"),d=c("a-descriptions-item"),y=c("a-descriptions"),C=c("icon-exclamation-circle-fill");return h(),T("div",G,[e(W,{class:"card",orderStatus:r.orderStatus},null,8,["orderStatus"]),r.orderStatus===1?(h(),L(x,{key:0},{default:t(()=>[a[0]||(a[0]=n(" 请在下单后的15分钟内完成支付，否则订单将自动取消。距离自动取消还有")),e(A,{format:"mm:ss.SSS",value:I(),"value-style":{color:"red",fontSize:"18px",fontWeight:"bold",marginLeft:"5px"},onFinish:k},null,8,["value"])]),_:1})):V("",!0),o("div",J,[a[1]||(a[1]=o("h2",null,"订单信息",-1)),e(i),e(y,{column:"2"},{default:t(()=>[e(d,{label:"订单编号"},{default:t(()=>[n(s(r.id),1)]),_:1}),e(d,{label:"下单时间"},{default:t(()=>[n(s(O(r.orderTime)),1)]),_:1}),e(d,{label:"订单状态"},{default:t(()=>[e(q,{orderStatus:r.orderStatus},null,8,["orderStatus"])]),_:1}),e(d,{label:"下单用户"},{default:t(()=>[n(s(j(v).username),1)]),_:1})]),_:1})]),o("div",K,[a[2]||(a[2]=o("h2",null,"地址信息",-1)),e(i),e(y,{column:3},{default:t(()=>[e(d,{label:"收件人",span:1},{default:t(()=>[n(s(l.receiverName),1)]),_:1}),e(d,{label:"电话",span:1},{default:t(()=>[n(s(l.receiverPhone),1)]),_:1}),e(d,{label:"邮编",span:1},{default:t(()=>[n(s(l.postCode),1)]),_:1}),e(d,{label:"省市区",span:1},{default:t(()=>[n(s(l.province)+" / "+s(l.city)+" / "+s(l.district),1)]),_:1}),e(d,{label:"详细地址",span:1},{default:t(()=>[n(s(l.detailAddress),1)]),_:1})]),_:1})]),o("div",Q,[a[4]||(a[4]=o("h2",null,"商品信息",-1)),e(i),e(x,{type:"normal"},{icon:t(()=>[e(C)]),default:t(()=>[a[3]||(a[3]=n(" 仅代表下单时数据，与当前最新商品信息可能有差异或不同。 "))]),_:1}),e(z,{tradeItems:r.tradeItemList},null,8,["tradeItems"])]),o("div",X,[a[5]||(a[5]=o("h2",null,"支付信息",-1)),e(i),e(y,{column:"3"},{default:t(()=>[e(d,{label:"支付状态"},{default:t(()=>[n(s(D.value),1)]),_:1}),e(d,{label:"总金额"},{default:t(()=>[n("￥"+s(r.totalAmount.toFixed(2)),1)]),_:1}),e(d,{label:"应付金额"},{default:t(()=>[n("￥"+s(r.paymentAmount.toFixed(2)),1)]),_:1})]),_:1})]),o("div",Z,[a[6]||(a[6]=o("h2",null,"备注信息",-1)),e(i),o("p",null,s(r.remark||"无"),1)])])}}},ne=w(ee,[["__scopeId","data-v-f8564e46"]]);export{ne as default};
