import{_ as B,i as Y,h as p,l as F,a as h,d as n,f as o,w as a,r,M as H,q as P,o as c,j as l,t as d,e as L,b as q,F as A,k as E,s as R}from"./index-CLUkJoio.js";import{g as U}from"./trade-oCk42qMb.js";import{O as $}from"./OrderStatusTag-WWfOcGnG.js";const G={class:"order-page"},J={class:"list-item-footer"},K={style:{"font-size":"16px","font-weight":"bold"}},Q={style:{"font-size":"16px",color:"red","font-weight":"bold"}},W={class:"order-details"},X={__name:"order",setup(Z){const _=Y([]),v=p(!1),m=p(1),y=p(5),C=p(0),i=p(0),S=P(),I=e=>{m.value=e,g()},b=e=>e.tradeItemList.length>2?e.tradeItemList.slice(0,2).map(t=>t.productName).join(", ")+" 等"+e.tradeItemList.length+"件商品":e.tradeItemList.map(t=>t.productName).join(", ")+" 共"+e.tradeItemList.length+"件商品",g=async()=>{v.value=!0;try{const e=await U(m.value,y.value,i.value==0?null:i.value);_.splice(0,_.length,...e.data),C.value=e.totalCount}catch{H.error("获取订单列表失败，请稍后再试")}finally{v.value=!1}},k=e=>{i.value=e,m.value=1,g()},w=e=>R(e).format("YYYY-MM-DD HH:mm:ss"),z=e=>{S.push({name:"Order-Detail",params:{id:e}})};return F(()=>{g()}),(e,t)=>{const u=r("a-radio"),V=r("a-radio-group"),D=r("a-button"),x=r("a-avatar"),M=r("a-avatar-group"),N=r("a-list-item-meta"),O=r("a-list-item"),T=r("a-list"),j=r("a-pagination");return c(),h("div",G,[t[8]||(t[8]=n("h1",null,"我的订单",-1)),o(V,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),type:"button",style:{"margin-bottom":"20px"},onChange:k},{default:a(()=>[o(u,{value:0},{default:a(()=>t[1]||(t[1]=[l("全部")])),_:1}),o(u,{value:1},{default:a(()=>t[2]||(t[2]=[l("待支付")])),_:1}),o(u,{value:2},{default:a(()=>t[3]||(t[3]=[l("已支付")])),_:1}),o(u,{value:4},{default:a(()=>t[4]||(t[4]=[l("已完成")])),_:1}),o(u,{value:5},{default:a(()=>t[5]||(t[5]=[l("交易取消")])),_:1}),o(u,{value:6},{default:a(()=>t[6]||(t[6]=[l("退款退货")])),_:1})]),_:1},8,["modelValue"]),o(T,{data:_,loading:v.value,bordered:"","item-layout":"vertical"},{item:a(({item:s})=>[o(O,{class:"list-demo-item","action-layout":"vertical"},{actions:a(()=>[n("div",J,[o($,{orderStatus:s.orderStatus},null,8,["orderStatus"]),o(D,{type:"text",size:"small",onClick:f=>z(s.id)},{default:a(()=>[l(d(s.orderStatus==1?"去支付":"查看订单"),1)]),_:2},1032,["onClick"])])]),extra:a(()=>[o(M,{size:124},{default:a(()=>[(c(!0),h(A,null,E(s.tradeItemList.slice(0,3),f=>(c(),L(x,{key:f.productId,"image-url":f.picture,class:"trade-item-picture"},null,8,["image-url"]))),128)),s.tradeItemList.length>3?(c(),L(x,{key:0,class:"trade-item-picture"},{default:a(()=>[l("+"+d(s.tradeItemList.length-3),1)]),_:2},1024)):q("",!0)]),_:2},1024)]),default:a(()=>[o(N,null,{title:a(()=>[n("div",K,[l(d(b(s))+" ",1),n("span",Q," ￥ "+d(s.paymentAmount),1)])]),description:a(()=>[n("div",W,[n("div",null,"订单编号："+d(s.code),1),n("div",null,"下单时间："+d(w(s.orderTime)),1)])]),avatar:a(()=>t[7]||(t[7]=[])),_:2},1024)]),_:2},1024)]),_:1},8,["data","loading"]),o(j,{style:{"margin-top":"10px"},current:m.value,"page-size":y.value,total:C.value,"show-total":!0,onChange:I},null,8,["current","page-size","total"])])}}},ot=B(X,[["__scopeId","data-v-c8198f8e"]]);export{ot as default};
