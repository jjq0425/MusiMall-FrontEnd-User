import{_ as k,c as y,a as c,o as n,b as w,d as u,e as Q,t as f,r as d,f as P,w as _,g as p,F as C,h as F,i as S,j as m,k as M,l as A,n as O,M as j}from"./index-DpukPn7V.js";const U="/MusiMall-FrontEnd-User/assets/coin-BLVCF3ke.png",D={class:"price-stock"},E={key:0,class:"price"},G={key:1,class:"price",style:{color:"grey"}},T={class:"stock"},X={key:0,style:{color:"#f76707"}},H={key:1},J={key:2},K={key:3},R={__name:"PriceAndStockShow",props:{price:{type:Number,required:!0},remainQuantity:{type:Number,required:!0},totalQuantity:{type:Number,required:!0}},setup(e){const t=e,o=y(()=>t.price.toFixed(2)),a=y(()=>t.remainQuantity<=0),s=y(()=>t.remainQuantity<=100&&t.remainQuantity>0),l=y(()=>t.totalQuantity-t.remainQuantity<=100);return(v,g)=>(n(),c("div",D,[a.value?w("",!0):(n(),c("div",E,[g[0]||(g[0]=u("img",{src:U,alt:"coin",style:{width:"22px",height:"22px","margin-right":"1px"}},null,-1)),Q(" "+f(o.value),1)])),a.value?(n(),c("div",G,"已售罄")):w("",!0),u("div",T,[s.value?(n(),c("span",X,"库存告急，仅剩"+f(e.remainQuantity)+"件",1)):l.value?(n(),c("span",H,"新品上架，欢迎选购")):a.value?(n(),c("span",J,"商品已售罄，关注其他商品吧")):(n(),c("span",K,"已售："+f(e.totalQuantity-e.remainQuantity)+" 库存: "+f(e.remainQuantity),1))])]))}},W=k(R,[["__scopeId","data-v-6f45f6e1"]]),Y=["src","alt"],Z={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(e){return(t,o)=>{const a=d("a-card-meta"),s=d("a-card");return n(),P(s,{hoverable:"",class:"product-card"},{cover:_(()=>[u("div",null,[u("img",{style:{width:"240px",height:"135px",overflow:"hidden"},src:e.product.picture,alt:e.product.name},null,8,Y)])]),default:_(()=>[p(a,{title:e.product.name,description:e.product.description},{avatar:_(()=>[p(W,{style:{transform:"translateX(-5px)"},price:e.product.price,totalQuantity:e.product.quantity,remainQuantity:e.product.remainQuantity},null,8,["price","totalQuantity","remainQuantity"])]),_:1},8,["title","description"])]),_:1})}}},tt=k(Z,[["__scopeId","data-v-48196a50"]]),et={class:"product-list"},at={__name:"ProductList",props:{productListInfo:{type:Array,required:!0}},setup(e){return(t,o)=>{const a=d("a-col"),s=d("a-row");return n(),c("div",et,[p(s,{gutter:16},{default:_(()=>[(n(!0),c(C,null,F(e.productListInfo,l=>(n(),P(a,{key:l.id,span:6},{default:_(()=>[p(tt,{product:l},null,8,["product"])]),_:2},1024))),128))]),_:1})])}}},nt=k(at,[["__scopeId","data-v-1a70ebdb"]]),b="/api/product/v1",ot=(e,t)=>S.get(`${b}/product`,{params:{page:e,pageSize:t,categoryName:null}}),st=(e,t,o)=>S.get(`${b}/product/searchPage`,{params:{query:e,page:t,pageSize:o}}),rt={class:"search"},ct={class:"search-Btn-Div"},it={key:0,class:"pagination-div"},ut={__name:"product",setup(e){const t=m(""),o=m(!1),a=M([]),s=m(1),l=m(8),v=m(0);A(()=>{t.value="",h()});const g=()=>{t.value&&t.value.trim()!=""?x():h()},h=async()=>{o.value=!0;const i=await ot(s.value,l.value);a.splice(0,a.length,...i.data),v.value=i.totalCount,o.value=!1},x=async()=>{o.value=!0,s.value=1;const i=await st(t.value,s.value,l.value).catch(r=>{j.error("搜索失败,请稍后再试:"+r),o.value=!1});a.splice(0,a.length,...i.data),v.value=i.totalCount,o.value=!1},z=i=>{s.value=i,t.value?x():h()},L=i=>{s.value=1,l.value=i,t.value?x():h()};return(i,r)=>{const N=d("icon-search"),$=d("a-input-search"),I=d("a-empty"),V=d("a-pagination"),q=d("a-spin");return n(),c("div",null,[u("div",rt,[r[2]||(r[2]=u("div",{class:"title"},[u("h1",{style:{margin:"0 auto","text-align":"center","font-size":"45px"}}," 优选好物 ")],-1)),u("div",ct,[p($,{class:"search-Btn",modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=B=>t.value=B),placeholder:"输入商品关键词","search-button":"",onSearch:g,loading:o.value},{"button-icon":_(()=>[p(N)]),"button-default":_(()=>r[1]||(r[1]=[Q(" 搜好物 ")])),_:1},8,["modelValue","loading"])])]),p(q,{loading:o.value,tip:"加载中..."},{default:_(()=>[u("div",{class:O(["product-list-div",{"empty-container":a.length===0}])},[a.length===0?(n(),P(I,{key:0},{default:_(()=>r[3]||(r[3]=[Q(" 没有搜索到商品 ")])),_:1})):(n(),c(C,{key:1},[p(nt,{"product-list-info":a},null,8,["product-list-info"]),r[4]||(r[4]=u("div",{style:{height:"50px"}},null,-1)),a.length>0?(n(),c("div",it,[p(V,{total:v.value,current:s.value,"page-size":l.value,onChange:z,onPageSizeChange:L,"page-size-options":[8,16,32,64],"show-total":"","show-jumper":"","show-page-size":""},null,8,["total","current","page-size"])])):w("",!0)],64))],2)]),_:1},8,["loading"])])}}},dt=k(ut,[["__scopeId","data-v-cabac47a"]]);export{dt as default};
